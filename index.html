<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Mapa de USA con ECharts</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    #main {
      width: 100%;
      height: 100vh;
    }
  </style>
  <!-- ECharts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <!-- jQuery para $.get -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <div id="main"></div>
  <script>
    var ROOT_PATH = 'https://echarts.apache.org/examples';

    var chartDom = document.getElementById('main');
    var myChart = echarts.init(chartDom);
    var option;

    myChart.showLoading();

    $.get(ROOT_PATH + '/data/asset/geo/USA.json', function (usaJson) {
      echarts.registerMap('USA', usaJson, {
        Alaska: {
          left: -131,
          top: 25,
          width: 15
        },
        Hawaii: {
          left: -110,
          top: 28,
          width: 5
        },
        'Puerto Rico': {
          left: -76,
          top: 26,
          width: 2
        }
      });

      function randomPieSeries(center, radius) {
        var data = ['A', 'B', 'C', 'D'].map(function (t) {
          return {
            value: Math.round(Math.random() * 100),
            name: 'Category ' + t
          };
        });
        return {
          type: 'pie',
          coordinateSystem: 'geo',
          tooltip: {
            formatter: '{b}: {c} ({d}%)'
          },
          label: {
            show: false
          },
          labelLine: {
            show: false
          },
          animationDuration: 0,
          radius: radius,
          center: center,
          data: data
        };
      }

      option = {
        geo: {
          map: 'USA',
          roam: true,
          itemStyle: {
            areaColor: '#e7e8ea'
          }
        },
        tooltip: {},
        legend: {},
        series: [
          randomPieSeries([-86.753504, 33.01077], 15),
          randomPieSeries([-116.853504, 39.8], 25),
          randomPieSeries([-99, 31.5], 30),
          randomPieSeries(
            parseInt(echarts.version.split('.').join('')) > 540
              ? 'Maine'
              : [-69, 45.5],
            12
          )
        ]
      };

      myChart.hideLoading();
      myChart.setOption(option);
    });
  </script>
</body>
</html>
